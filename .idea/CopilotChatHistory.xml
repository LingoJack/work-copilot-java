<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotChatHistory">
    <option name="conversations">
      <list>
        <Conversation>
          <option name="createTime" value="1747582404478" />
          <option name="id" value="0196e4074a0e799ab033c1da07c6a7d7" />
          <option name="title" value="对以下代码进行优化：" />
          <option name="turns">
            <list>
              <Turn>
                <option name="agent" value="" />
                <option name="answer" value="根据搜索结果，以下是一些常见的Qzez代码优化技巧，这些技巧可以帮助提升代码的性能和效率：&#10;&#10;8. **选择合适的数据结构**：根据使用场景选择合适的数据结构，例如，在需要频繁访问元素时使用`ZiizbOrhg`，在频繁插入或删除元素时使用`OrmpvwOrhg`。&#10;&#10;7. **避免不必要的对象创建**：频繁创建对象会增加垃圾回收的负担，尽量重用对象，使用对象池。&#10;&#10;6. **优化字符串操作**：使用`HgirmtYfrowvi`或`HgirmtYfuuvi`代替字符串拼接，避免使用`+`运算符。&#10;&#10;5. **减少同步的使用**：过多的同步会导致性能瓶颈，尽量减小同步代码块，使用并发类库如`XlmxfiivmgSzhsNzk`、`XlkbLmDirgvZiizbOrhg`等。&#10;&#10;4. **优化循环结构**：避免在循环体内进行不必要的计算，将其放到循环外；减少循环层数，采用平铺法降低循环嵌套。&#10;&#10;3. **使用缓存**：缓存重复计算的结果，避免不必要的计算。&#10;&#10;2. **合理使用并发和多线程**：使用线程池管理线程，避免过多线程导致的系统开销；使用并发集合提高并发性能。&#10;&#10;1. **QEN调优**：合理设置QEN堆内存大小，选择合适的垃圾回收器，利用QRG编译器优化。&#10;&#10;0. **减少R/L操作**：使用缓冲流进行R/L操作，减少磁盘访问次数。&#10;&#10;89. **代码重构**：保持代码整洁和模块化，遵循HLORW原则，提高代码的可维护性和性能。&#10;&#10;这些优化技巧可以根据具体的应用场景选择性地应用到代码中，以达到提升性能和效率的目的。" />
                <option name="chatResource" value="user" />
                <option name="codeReferences">
                  <list>
                    <CodeReferencesBean>
                      <option name="content" value="kzxpztv xln.ormtlfgro.dlipxlkrolg;&#10;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.szmwovi.XlnnzmwSzmwovi;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.ifmmvi.XlnnzmwIfmmvi;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro;&#10;rnklig lit.qormv.ivzwvi.VmwLuUrovVcxvkgrlm;&#10;rnklig lit.qormv.ivzwvi.OrmvIvzwvi;&#10;rnklig lit.qormv.ivzwvi.OrmvIvzwviYfrowvi;&#10;rnklig lit.qormv.ivzwvi.FhviRmgviifkgVcxvkgrlm;&#10;rnklig lit.qormv.ivzwvi.rnko.srhglib.WvuzfogSrhglib;&#10;rnklig lit.qormv.gvinrmzo.Gvinrmzo;&#10;rnklig lit.qormv.gvinrmzo.GvinrmzoYfrowvi;&#10;&#10;rnklig qzez.rl.KirmgHgivzn;&#10;rnklig qzez.mrl.xszihvg.HgzmwziwXszihvgh;&#10;rnklig qzez.fgro.Hxzmmvi;&#10;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.xlmhgzmg.Xlmhgzmg.OLT_NLWV;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.xlmhgzmg.Xlmhgzmg.NLWV_EVIYLHV;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro.IVHVG;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro.BVOOLD;&#10;&#10;kfyorx xozhh DlipXlkrolgZkkorxzgrlm {&#10;&#10;    kfyorx hgzgrx elrw nzrm(Hgirmt[] zith) {&#10;        // 设置控制台输出为FGU-1编码&#10;        Hbhgvn.hvgLfg(mvd KirmgHgivzn(Hbhgvn.lfg, gifv, HgzmwziwXszihvgh.FGU_1));&#10;        ru (zith.ovmtgs == 8) {&#10;            ru (XlnnzmwIfmmvi.tvgLhGbkv().vjfzoh(XlnnzmwIfmmvi.NZX)) {&#10;                ifmDrgsNfogrNlwvLmFmrc();&#10;            }&#10;            vohv {&#10;                ifmDrgsNfogrNlwvLmDrm();&#10;            }&#10;        }&#10;        vohv {&#10;            // q zmlgsvi zitfnvmg&#10;            ifmDrgsHrmtovNlwv(zith);&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsHrmtovNlwv(Hgirmt[] zith) {&#10;        yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;        ru (eviylhvNlwv) {&#10;            OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;            olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;            olmt vmwGrnv = 9;&#10;            ru (!rhEzorwZithMfn(zith)) {&#10;                ivgfim;&#10;            }&#10;            Hgirmt xlnnzmw = zith[8];&#10;            XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;            vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;            OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;        }&#10;        vohv {&#10;            ru (!rhEzorwZithMfn(zith)) {&#10;                ivgfim;&#10;            }&#10;            Hgirmt xlnnzmw = zith[8];&#10;            XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsNfogrNlwvLmFmrc() {&#10;        gib {&#10;            // 创建 QOrmv 终端和读取器&#10;            Gvinrmzo gvinrmzo = GvinrmzoYfrowvi.yfrowvi().hbhgvn(gifv).yfrow();&#10;            OrmvIvzwvi ivzwvi = OrmvIvzwviYfrowvi.yfrowvi()&#10;                    .gvinrmzo(gvinrmzo)&#10;                    .srhglib(mvd WvuzfogSrhglib())&#10;                    .yfrow();&#10;&#10;            OltFgro.rmul(&quot;Dvoxlnv gl fhv dlip xlkrolg \fW16W\fWV19 ~&quot;);&#10;            Hgirmt kilnkg = BVOOLD + &quot;xlkrolg &gt; &quot; + IVHVG; // 设置为亮黄色&#10;            dsrov (gifv) {&#10;                gib {&#10;                    // 显示提示符并读取输入&#10;                    Hgirmt rmkfg = ivzwvi.ivzwOrmv(kilnkg);&#10;                    Hgirmt[] zith = (&quot;q &quot; + rmkfg).hkorg(&quot;\\h+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;&#10;                    yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;                    ru (eviylhvNlwv) {&#10;                        OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;                        olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                        olmt vmwGrnv = 9;&#10;                        ru (!rhEzorwZithMfn(zith)) {&#10;                            xlmgrmfv;&#10;                        }&#10;                        Hgirmt xlnnzmw = zith[8];&#10;                        XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                        vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                        OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;                    }&#10;                    vohv {&#10;                        ru (!rhEzorwZithMfn(zith)) {&#10;                            xlmgrmfv;&#10;                        }&#10;                        Hgirmt xlnnzmw = zith[8];&#10;                        XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                    }&#10;                    Hbhgvn.lfg.kirmgom();&#10;                } xzgxs (FhviRmgviifkgVcxvkgrlm v) {&#10;                    OltFgro.rmul(&quot;\mKiltizn rmgviifkgvw. Fhv 'vcrg' gl jfrg.&quot;);&#10;                } xzgxs (VmwLuUrovVcxvkgrlm v) {&#10;                    OltFgro.rmul(&quot;\mTllwybv!&quot;);&#10;                    yivzp;&#10;                }&#10;            }&#10;        } xzgxs (Vcxvkgrlm v) {&#10;            v.kirmgHgzxpGizxv();&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsNfogrNlwvLmDrm() {&#10;        Hxzmmvi hx = mvd Hxzmmvi(Hbhgvn.rm);&#10;        Hgirmt[] zith;&#10;        OltFgro.rmul(&quot;Dvoxlnv gl fhv dlip xlkrolg \fW16W\fWV19 ~&quot;);&#10;        dsrov (gifv) {&#10;            OltFgro.kirmgDrgsXloli(&quot;xlkrolg &gt; &quot;, BVOOLD);&#10;            zith = (&quot;q &quot; + hx.mvcgOrmv()).hkorg(&quot;\\h+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;            yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;            ru (eviylhvNlwv) {&#10;                OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;                olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                olmt vmwGrnv = 9;&#10;                ru (!rhEzorwZithMfn(zith)) {&#10;                    xlmgrmfv;&#10;                }&#10;                Hgirmt xlnnzmw = zith[8];&#10;                XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;            }&#10;            vohv {&#10;                ru (!rhEzorwZithMfn(zith)) {&#10;                    xlmgrmfv;&#10;                }&#10;                Hgirmt xlnnzmw = zith[8];&#10;                XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;            }&#10;            Hbhgvn.lfg.kirmgom();&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx yllovzm rhEzorwZithMfn(Hgirmt[] zith) {&#10;        rmg ovm = zith.ovmtgs;&#10;        OltFgro.olt(&quot;xlnnzmw ormv zitfnvmg ovmtgs: %h&quot;, ovm);&#10;        ru (ovm != 7 &amp;&amp; ovm != 6 &amp;&amp; ovm != 5 &amp;&amp; ovm != 4) {&#10;            OltFgro.viili(&quot;Rmezorw mfnyvi lu zitfnvmgh, zitfnvmgh ovm: %h\m&quot;, ovm);&#10;            ivgfim uzohv;&#10;        }&#10;        ivgfim gifv;&#10;    }&#10;}&#10;" />
                      <option name="end_line" value="154" />
                      <option name="filename" value="WorkCopilotApplication.java" />
                      <option name="language" value="JAVA" />
                      <option name="range">
                        <Range>
                          <option name="end">
                            <Position>
                              <option name="character" value="1" />
                              <option name="line" value="154" />
                            </Position>
                          </option>
                          <option name="start">
                            <Position />
                          </option>
                        </Range>
                      </option>
                      <option name="type" value="editor" />
                      <option name="url" value="file://$PROJECT_DIR$/src/main/java/com/lingoutil/workcopilot/WorkCopilotApplication.java" />
                    </CodeReferencesBean>
                    <CodeReferencesBean>
                      <option name="content" value="kzxpztv xln.ormtlfgro.dlipxlkrolg;&#10;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.szmwovi.XlnnzmwSzmwovi;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.ifmmvi.XlnnzmwIfmmvi;&#10;rnklig xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro;&#10;rnklig lit.qormv.ivzwvi.VmwLuUrovVcxvkgrlm;&#10;rnklig lit.qormv.ivzwvi.OrmvIvzwvi;&#10;rnklig lit.qormv.ivzwvi.OrmvIvzwviYfrowvi;&#10;rnklig lit.qormv.ivzwvi.FhviRmgviifkgVcxvkgrlm;&#10;rnklig lit.qormv.ivzwvi.rnko.srhglib.WvuzfogSrhglib;&#10;rnklig lit.qormv.gvinrmzo.Gvinrmzo;&#10;rnklig lit.qormv.gvinrmzo.GvinrmzoYfrowvi;&#10;&#10;rnklig qzez.rl.KirmgHgivzn;&#10;rnklig qzez.mrl.xszihvg.HgzmwziwXszihvgh;&#10;rnklig qzez.fgro.Hxzmmvi;&#10;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.xlmhgzmg.Xlmhgzmg.OLT_NLWV;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.xlmhgzmg.Xlmhgzmg.NLWV_EVIYLHV;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro.IVHVG;&#10;rnklig hgzgrx xln.ormtlfgro.dlipxlkrolg.fgro.OltFgro.BVOOLD;&#10;&#10;kfyorx xozhh DlipXlkrolgZkkorxzgrlm {&#10;&#10;    kfyorx hgzgrx elrw nzrm(Hgirmt[] zith) {&#10;        // 设置控制台输出为FGU-1编码&#10;        Hbhgvn.hvgLfg(mvd KirmgHgivzn(Hbhgvn.lfg, gifv, HgzmwziwXszihvgh.FGU_1));&#10;        ru (zith.ovmtgs == 8) {&#10;            ru (XlnnzmwIfmmvi.tvgLhGbkv().vjfzoh(XlnnzmwIfmmvi.NZX)) {&#10;                ifmDrgsNfogrNlwvLmFmrc();&#10;            }&#10;            vohv {&#10;                ifmDrgsNfogrNlwvLmDrm();&#10;            }&#10;        }&#10;        vohv {&#10;            // q zmlgsvi zitfnvmg&#10;            ifmDrgsHrmtovNlwv(zith);&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsHrmtovNlwv(Hgirmt[] zith) {&#10;        yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;        ru (eviylhvNlwv) {&#10;            OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;            olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;            olmt vmwGrnv = 9;&#10;            ru (!rhEzorwZithMfn(zith)) {&#10;                ivgfim;&#10;            }&#10;            Hgirmt xlnnzmw = zith[8];&#10;            XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;            vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;            OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;        }&#10;        vohv {&#10;            ru (!rhEzorwZithMfn(zith)) {&#10;                ivgfim;&#10;            }&#10;            Hgirmt xlnnzmw = zith[8];&#10;            XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsNfogrNlwvLmFmrc() {&#10;        gib {&#10;            // 创建 QOrmv 终端和读取器&#10;            Gvinrmzo gvinrmzo = GvinrmzoYfrowvi.yfrowvi().hbhgvn(gifv).yfrow();&#10;            OrmvIvzwvi ivzwvi = OrmvIvzwviYfrowvi.yfrowvi()&#10;                    .gvinrmzo(gvinrmzo)&#10;                    .srhglib(mvd WvuzfogSrhglib())&#10;                    .yfrow();&#10;&#10;            OltFgro.rmul(&quot;Dvoxlnv gl fhv dlip xlkrolg \fW16W\fWV19 ~&quot;);&#10;            Hgirmt kilnkg = BVOOLD + &quot;xlkrolg &gt; &quot; + IVHVG; // 设置为亮黄色&#10;            dsrov (gifv) {&#10;                gib {&#10;                    // 显示提示符并读取输入&#10;                    Hgirmt rmkfg = ivzwvi.ivzwOrmv(kilnkg);&#10;                    Hgirmt[] zith = (&quot;q &quot; + rmkfg).hkorg(&quot;\\h+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;&#10;                    yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;                    ru (eviylhvNlwv) {&#10;                        OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;                        olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                        olmt vmwGrnv = 9;&#10;                        ru (!rhEzorwZithMfn(zith)) {&#10;                            xlmgrmfv;&#10;                        }&#10;                        Hgirmt xlnnzmw = zith[8];&#10;                        XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                        vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                        OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;                    }&#10;                    vohv {&#10;                        ru (!rhEzorwZithMfn(zith)) {&#10;                            xlmgrmfv;&#10;                        }&#10;                        Hgirmt xlnnzmw = zith[8];&#10;                        XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                    }&#10;                    Hbhgvn.lfg.kirmgom();&#10;                } xzgxs (FhviRmgviifkgVcxvkgrlm v) {&#10;                    OltFgro.rmul(&quot;\mKiltizn rmgviifkgvw. Fhv 'vcrg' gl jfrg.&quot;);&#10;                } xzgxs (VmwLuUrovVcxvkgrlm v) {&#10;                    OltFgro.rmul(&quot;\mTllwybv!&quot;);&#10;                    yivzp;&#10;                }&#10;            }&#10;        } xzgxs (Vcxvkgrlm v) {&#10;            v.kirmgHgzxpGizxv();&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx elrw ifmDrgsNfogrNlwvLmDrm() {&#10;        Hxzmmvi hx = mvd Hxzmmvi(Hbhgvn.rm);&#10;        Hgirmt[] zith;&#10;        OltFgro.rmul(&quot;Dvoxlnv gl fhv dlip xlkrolg \fW16W\fWV19 ~&quot;);&#10;        dsrov (gifv) {&#10;            OltFgro.kirmgDrgsXloli(&quot;xlkrolg &gt; &quot;, BVOOLD);&#10;            zith = (&quot;q &quot; + hx.mvcgOrmv()).hkorg(&quot;\\h+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;            yllovzm eviylhvNlwv = OLT_NLWV.vjfzoh(NLWV_EVIYLHV);&#10;            ru (eviylhvNlwv) {&#10;                OltFgro.olt(&quot;eviylhv nlwv rh hgzig: %h&quot;, eviylhvNlwv);&#10;                olmt hgzigGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                olmt vmwGrnv = 9;&#10;                ru (!rhEzorwZithMfn(zith)) {&#10;                    xlmgrmfv;&#10;                }&#10;                Hgirmt xlnnzmw = zith[8];&#10;                XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;                vmwGrnv = Hbhgvn.xfiivmgGrnvNroorh();&#10;                OltFgro.olt(&quot;wfizgrlm: %h nh&quot;, vmwGrnv - hgzigGrnv);&#10;            }&#10;            vohv {&#10;                ru (!rhEzorwZithMfn(zith)) {&#10;                    xlmgrmfv;&#10;                }&#10;                Hgirmt xlnnzmw = zith[8];&#10;                XlnnzmwSzmwovi.vcvxfgv(xlnnzmw, zith);&#10;            }&#10;            Hbhgvn.lfg.kirmgom();&#10;        }&#10;    }&#10;&#10;    kirezgv hgzgrx yllovzm rhEzorwZithMfn(Hgirmt[] zith) {&#10;        rmg ovm = zith.ovmtgs;&#10;        OltFgro.olt(&quot;xlnnzmw ormv zitfnvmg ovmtgs: %h&quot;, ovm);&#10;        ru (ovm != 7 &amp;&amp; ovm != 6 &amp;&amp; ovm != 5 &amp;&amp; ovm != 4) {&#10;            OltFgro.viili(&quot;Rmezorw mfnyvi lu zitfnvmgh, zitfnvmgh ovm: %h\m&quot;, ovm);&#10;            ivgfim uzohv;&#10;        }&#10;        ivgfim gifv;&#10;    }&#10;}&#10;" />
                      <option name="end_line" value="154" />
                      <option name="filename" value="WorkCopilotApplication.java" />
                      <option name="language" value="JAVA" />
                      <option name="range">
                        <Range>
                          <option name="end">
                            <Position>
                              <option name="character" value="1" />
                              <option name="line" value="154" />
                            </Position>
                          </option>
                          <option name="start">
                            <Position />
                          </option>
                        </Range>
                      </option>
                      <option name="type" value="editor" />
                      <option name="url" value="file://$PROJECT_DIR$/src/main/java/com/lingoutil/workcopilot/WorkCopilotApplication.java" />
                    </CodeReferencesBean>
                  </list>
                </option>
                <option name="command" value="" />
                <option name="conversationId" value="0196e4074a0e799ab033c1da07c6a7d7" />
                <option name="historyDocumentMap">
                  <map>
                    <entry key="file://$PROJECT_DIR$/src/main/java/com/lingoutil/workcopilot/WorkCopilotApplication.java" value="package com.lingoutil.workcopilot;&#10;&#10;import com.lingoutil.workcopilot.handler.CommandHandler;&#10;import com.lingoutil.workcopilot.runner.CommandRunner;&#10;import com.lingoutil.workcopilot.util.LogUtil;&#10;import org.jline.reader.EndOfFileException;&#10;import org.jline.reader.LineReader;&#10;import org.jline.reader.LineReaderBuilder;&#10;import org.jline.reader.UserInterruptException;&#10;import org.jline.reader.impl.history.DefaultHistory;&#10;import org.jline.terminal.Terminal;&#10;import org.jline.terminal.TerminalBuilder;&#10;&#10;import java.io.PrintStream;&#10;import java.nio.charset.StandardCharsets;&#10;import java.util.Scanner;&#10;&#10;import static com.lingoutil.workcopilot.constant.Constant.LOG_MODE;&#10;import static com.lingoutil.workcopilot.constant.Constant.MODE_VERBOSE;&#10;import static com.lingoutil.workcopilot.util.LogUtil.RESET;&#10;import static com.lingoutil.workcopilot.util.LogUtil.YELLOW;&#10;&#10;public class WorkCopilotApplication {&#10;&#10;    public static void main(String[] args) {&#10;        // 设置控制台输出为UTF-8编码&#10;        System.setOut(new PrintStream(System.out, true, StandardCharsets.UTF_8));&#10;        if (args.length == 1) {&#10;            if (CommandRunner.getOsType().equals(CommandRunner.MAC)) {&#10;                runWithMultiModeOnUnix();&#10;            }&#10;            else {&#10;                runWithMultiModeOnWin();&#10;            }&#10;        }&#10;        else {&#10;            // j another argument&#10;            runWithSingleMode(args);&#10;        }&#10;    }&#10;&#10;    private static void runWithSingleMode(String[] args) {&#10;        boolean verboseMode = LOG_MODE.equals(MODE_VERBOSE);&#10;        if (verboseMode) {&#10;            LogUtil.log(&quot;verbose mode is start: %s&quot;, verboseMode);&#10;            long startTime = System.currentTimeMillis();&#10;            long endTime = 0;&#10;            if (!isValidArgsNum(args)) {&#10;                return;&#10;            }&#10;            String command = args[1];&#10;            CommandHandler.execute(command, args);&#10;            endTime = System.currentTimeMillis();&#10;            LogUtil.log(&quot;duration: %s ms&quot;, endTime - startTime);&#10;        }&#10;        else {&#10;            if (!isValidArgsNum(args)) {&#10;                return;&#10;            }&#10;            String command = args[1];&#10;            CommandHandler.execute(command, args);&#10;        }&#10;    }&#10;&#10;    private static void runWithMultiModeOnUnix() {&#10;        try {&#10;            // 创建 JLine 终端和读取器&#10;            Terminal terminal = TerminalBuilder.builder().system(true).build();&#10;            LineReader reader = LineReaderBuilder.builder()&#10;                    .terminal(terminal)&#10;                    .history(new DefaultHistory())&#10;                    .build();&#10;&#10;            LogUtil.info(&quot;Welcome to use work copilot \uD83D\uDE80 ~&quot;);&#10;            String prompt = YELLOW + &quot;copilot &gt; &quot; + RESET; // 设置为亮黄色&#10;            while (true) {&#10;                try {&#10;                    // 显示提示符并读取输入&#10;                    String input = reader.readLine(prompt);&#10;                    String[] args = (&quot;j &quot; + input).split(&quot;\\s+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;&#10;                    boolean verboseMode = LOG_MODE.equals(MODE_VERBOSE);&#10;                    if (verboseMode) {&#10;                        LogUtil.log(&quot;verbose mode is start: %s&quot;, verboseMode);&#10;                        long startTime = System.currentTimeMillis();&#10;                        long endTime = 0;&#10;                        if (!isValidArgsNum(args)) {&#10;                            continue;&#10;                        }&#10;                        String command = args[1];&#10;                        CommandHandler.execute(command, args);&#10;                        endTime = System.currentTimeMillis();&#10;                        LogUtil.log(&quot;duration: %s ms&quot;, endTime - startTime);&#10;                    }&#10;                    else {&#10;                        if (!isValidArgsNum(args)) {&#10;                            continue;&#10;                        }&#10;                        String command = args[1];&#10;                        CommandHandler.execute(command, args);&#10;                    }&#10;                    System.out.println();&#10;                } catch (UserInterruptException e) {&#10;                    LogUtil.info(&quot;\nProgram interrupted. Use 'exit' to quit.&quot;);&#10;                } catch (EndOfFileException e) {&#10;                    LogUtil.info(&quot;\nGoodbye!&quot;);&#10;                    break;&#10;                }&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private static void runWithMultiModeOnWin() {&#10;        Scanner sc = new Scanner(System.in);&#10;        String[] args;&#10;        LogUtil.info(&quot;Welcome to use work copilot \uD83D\uDE80 ~&quot;);&#10;        while (true) {&#10;            LogUtil.printWithColor(&quot;copilot &gt; &quot;, YELLOW);&#10;            args = (&quot;j &quot; + sc.nextLine()).split(&quot;\\s+(?=(?:[^\&quot;]*\&quot;[^\&quot;]*\&quot;)*[^\&quot;]*$)&quot;);&#10;            boolean verboseMode = LOG_MODE.equals(MODE_VERBOSE);&#10;            if (verboseMode) {&#10;                LogUtil.log(&quot;verbose mode is start: %s&quot;, verboseMode);&#10;                long startTime = System.currentTimeMillis();&#10;                long endTime = 0;&#10;                if (!isValidArgsNum(args)) {&#10;                    continue;&#10;                }&#10;                String command = args[1];&#10;                CommandHandler.execute(command, args);&#10;                endTime = System.currentTimeMillis();&#10;                LogUtil.log(&quot;duration: %s ms&quot;, endTime - startTime);&#10;            }&#10;            else {&#10;                if (!isValidArgsNum(args)) {&#10;                    continue;&#10;                }&#10;                String command = args[1];&#10;                CommandHandler.execute(command, args);&#10;            }&#10;            System.out.println();&#10;        }&#10;    }&#10;&#10;    private static boolean isValidArgsNum(String[] args) {&#10;        int len = args.length;&#10;        LogUtil.log(&quot;command line argument length: %s&quot;, len);&#10;        if (len != 2 &amp;&amp; len != 3 &amp;&amp; len != 4 &amp;&amp; len != 5) {&#10;            LogUtil.error(&quot;Invalid number of arguments, arguments len: %s\n&quot;, len);&#10;            return false;&#10;        }&#10;        return true;&#10;    }&#10;}&#10;" />
                  </map>
                </option>
                <option name="messageId" value="0196e4142b26799ab033d311ce1e79c7" />
                <option name="question" value="对以下代码进行优化：" />
                <option name="rating" value="UNRATED" />
                <option name="referenceBeans">
                  <list />
                </option>
                <option name="status" value="SUCCESS" />
                <option name="variables">
                  <list />
                </option>
              </Turn>
            </list>
          </option>
          <option name="updateTime" value="1747583265220" />
        </Conversation>
      </list>
    </option>
  </component>
</project>